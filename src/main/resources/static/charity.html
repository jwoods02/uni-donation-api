<!DOCTYPE html>
<html lang = "en" >
    <head >
        <meta charset = "UTF-8" >
        <title >Charity Giving<</title >

        <link rel = "stylesheet" type = "text/css" href = "/css/bootstrap.min.css" />
        <script src="/js/jquery-3.2.1.min.js"></script>
        <script src = "/js/charity.js" ></script >
        <script src = "/js/js-url-2.5.0/url.js" ></script >

    </head >
    <body >

        <div id="t1"></div>
        <div id="t2"></div>
        <div id="t3"></div>




        <div class = "container" >
            <div class = "header" >
                <h3 class = "text-muted" >Charity Giving</h3 >
            </div >


            <hr/>


            <div class = "jumbotron" >
                <h1 >Charity Giving</h1 >
                <p class = "lead" >Making it easier to make it better...</p >
            </div >


            <!--

            This is the placeholder for the charity data section

            -->

            <section id = "charity-progress" >
                <div class = "row" >
                    <div class = "col-lg-6" >

                        <!--

Total of donations goes in here.

 -->

                        <H2 >Donation Total</H2 >
                        <div id = "totalContainer" >

                        </div >
                    </div >

                    <!--

List of activities goes in here.
 -->

                    <div class = "col-lg-6" >
                        <H2 >Activity Container</H2 >
                        <div id = "activityContainer" >
                            THIS TEXT SHOULD GO!
                        </div >
                    </div >
                </div >
            </section >


            <footer class = "footer" >
                <hr/>
                <p >&copy; Charity Giving 2017</p >
            </footer >

        </div >



        <script>

            $(document).ready(function() {

                console.log("Get the templates");

                //get the templates

                $("#t1").load("/templates/activity-table.html");
                console.log("Get the templates 1");

                $("#t2").load("/templates/activity-row.html");
                console.log("Get the templates 2");

                $("#t3").load("/templates/total-donations.html");
                console.log("Get the templates 3");




                    //get the charity id from the URL
                console.log("Get the charity from the URL");

                    var id = $.url(2);

                    console.log ("charity id = ", id);

                    //get the donation total from an API and inject

                console.log("get total and inject");

                    $.getJSON('/api/charity/' + id + '/donationTotal', function (data) {
                        setTotal(data, '#totalContainer');
                    });
                console.log ("get activities and inject");
                    //get the list of activities from an API and inject
                    $.getJSON('/api/charity/' + id + '/recentActivity', function (data) {
                        setActivities(data, '#activityContainer');
                    });

            });
        </script >
    </body >
</html >